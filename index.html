<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Caterpillar Quest</title>
  <style> html,body{height:100%;margin:0;background:#000}body{display:flex;align-items:center;justify-content:center}canvas{max-width:100%;height:auto}</style>
  <link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAA" />
</head>
<body>
  <canvas id="canvas" width="1024" height="768"></canvas>
  <script>
    // Define Module BEFORE loading the engine
    window.Module = {
      arguments: ['./game.love'],
      print: function(txt){ console.log(txt); },
      printErr: function(txt){ console.error(txt); },
      canvas: (function(){ return document.getElementById('canvas'); })()
    };

    function loadEngine(src){
      var s = document.createElement('script');
      s.src = src + '?v=ca6fca8';
      s.async = true;
      document.head.appendChild(s);
    }

    // Try release/love.js first, fall back to game.js if not present
    fetch('release/love.js', { method: 'HEAD' }).then(function(res){
      if(res.ok) loadEngine('release/love.js');
      else loadEngine('game.js');
    }).catch(function(){
      loadEngine('game.js');
    });
  </script>
</body>
</html>
